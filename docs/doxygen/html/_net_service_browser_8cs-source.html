<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Crossfade: C:/Users/philwo/Documents/Visual Studio 2005/Projects/Crossfade/crossfade/crossfade/dnssd/NetServiceBrowser.cs Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Packages</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>C:/Users/philwo/Documents/Visual Studio 2005/Projects/Crossfade/crossfade/crossfade/dnssd/NetServiceBrowser.cs</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="keyword">using</span> System;
<a name="l00002"></a>00002 <span class="keyword">using</span> System.Collections.Generic;
<a name="l00003"></a>00003 <span class="keyword">using</span> System.Text;
<a name="l00004"></a>00004 <span class="keyword">using</span> System.Runtime.InteropServices;
<a name="l00005"></a>00005 
<a name="l00006"></a>00006 <span class="keyword">using</span> System.Windows.Forms;
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="keyword">namespace </span>ZeroconfService
<a name="l00009"></a>00009 {
<a name="l00032"></a><a class="code" href="class_zeroconf_service_1_1_net_service_browser.html">00032</a>     <span class="keyword">public</span> sealed <span class="keyword">class </span><a class="code" href="class_zeroconf_service_1_1_net_service_browser.html" title="The NetServiceBrowser class enables the user of the class to find published services...">NetServiceBrowser</a> : <a class="code" href="class_zeroconf_service_1_1_d_n_s_service.html" title="The base class used by the NetServiceBrowser and NetService classes. This class primarily...">DNSService</a>
<a name="l00033"></a>00033     {
<a name="l00052"></a>00052         <span class="keyword">public</span> delegate <span class="keywordtype">void</span> <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#1bbd4172809efcd5f6bdbf03dc7f0d9e" title="Represents the method that will handle DidFindService events from a NetServiceBrowser...">ServiceFound</a>(<a class="code" href="class_zeroconf_service_1_1_net_service_browser.html" title="The NetServiceBrowser class enables the user of the class to find published services...">NetServiceBrowser</a> browser, <a class="code" href="class_zeroconf_service_1_1_net_service.html" title="The NetService class represents a network service that your application publishes...">NetService</a> service, <span class="keywordtype">bool</span> moreComing);
<a name="l00053"></a>00053 
<a name="l00057"></a><a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#035ed4894fe03e42dda58abc91ea8371">00057</a>         <span class="keyword">public</span> <span class="keyword">event</span> ServiceFound <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#035ed4894fe03e42dda58abc91ea8371" title="Occurs when a NetService was found.">DidFindService</a>;
<a name="l00058"></a>00058 
<a name="l00073"></a>00073         <span class="keyword">public</span> delegate <span class="keywordtype">void</span> <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#4c9a3e77b20052e03aaf1f8afc4f2398" title="Represents the method that will handle DidRemoveService events from a NetServiceBrowser...">ServiceRemoved</a>(<a class="code" href="class_zeroconf_service_1_1_net_service_browser.html" title="The NetServiceBrowser class enables the user of the class to find published services...">NetServiceBrowser</a> browser, <a class="code" href="class_zeroconf_service_1_1_net_service.html" title="The NetService class represents a network service that your application publishes...">NetService</a> service, <span class="keywordtype">bool</span> moreComing);
<a name="l00074"></a>00074 
<a name="l00078"></a><a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#de8c954d00e6c8fab2502d7a21c3664c">00078</a>         <span class="keyword">public</span> <span class="keyword">event</span> <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#4c9a3e77b20052e03aaf1f8afc4f2398" title="Represents the method that will handle DidRemoveService events from a NetServiceBrowser...">ServiceRemoved</a> <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#de8c954d00e6c8fab2502d7a21c3664c" title="Occurs when a NetService is no longer available.">DidRemoveService</a>;
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 
<a name="l00093"></a>00093         <span class="keyword">public</span> delegate <span class="keywordtype">void</span> <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#dc1cdb019257b6ccd6f5096168a7bb90" title="Represents the method that will handle DidFindDomain events from a NetServiceBrowser...">DomainFound</a>(<a class="code" href="class_zeroconf_service_1_1_net_service_browser.html" title="The NetServiceBrowser class enables the user of the class to find published services...">NetServiceBrowser</a> browser, <span class="keywordtype">string</span> domainName, <span class="keywordtype">bool</span> moreComing);
<a name="l00094"></a>00094 
<a name="l00098"></a><a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#0d4148b44bee4eb640f974192911341b">00098</a>         <span class="keyword">public</span> <span class="keyword">event</span> <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#dc1cdb019257b6ccd6f5096168a7bb90" title="Represents the method that will handle DidFindDomain events from a NetServiceBrowser...">DomainFound</a> <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#0d4148b44bee4eb640f974192911341b" title="Occurs when a domain has been found.">DidFindDomain</a>;
<a name="l00099"></a>00099 
<a name="l00112"></a>00112         <span class="keyword">public</span> delegate <span class="keywordtype">void</span> <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#1eb106b996e54487b275e4ada546399a" title="Represents the method that will handle DidRemoveDomain events from a NetServiceBrowser...">DomainRemoved</a>(<a class="code" href="class_zeroconf_service_1_1_net_service_browser.html" title="The NetServiceBrowser class enables the user of the class to find published services...">NetServiceBrowser</a> browser, <span class="keywordtype">string</span> domainName, <span class="keywordtype">bool</span> moreComing);
<a name="l00113"></a>00113 
<a name="l00117"></a><a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#20debac57b341e18c1f76d3c62c49ce1">00117</a>         <span class="keyword">public</span> <span class="keyword">event</span> <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#1eb106b996e54487b275e4ada546399a" title="Represents the method that will handle DidRemoveDomain events from a NetServiceBrowser...">DomainRemoved</a> <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#20debac57b341e18c1f76d3c62c49ce1" title="Occurs when a domain is no longer available.">DidRemoveDomain</a>;
<a name="l00118"></a>00118 
<a name="l00119"></a>00119         <span class="keyword">private</span> List&lt;NetService&gt; foundServices;
<a name="l00120"></a>00120         <span class="keyword">private</span> <a class="code" href="class_zeroconf_service_1_1m_d_n_s_imports.html">mDNSImports</a>.DNSServiceBrowseReply browseReplyCb;
<a name="l00121"></a>00121         <span class="keyword">private</span> <a class="code" href="class_zeroconf_service_1_1m_d_n_s_imports.html">mDNSImports</a>.DNSServiceDomainEnumReply domainSearchReplyCb;
<a name="l00122"></a>00122         <span class="keyword">private</span> GCHandle gchSelf;
<a name="l00123"></a>00123 
<a name="l00127"></a><a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#8abaa7a7a7009d93265410ad79cd300b">00127</a>         <span class="keyword">public</span> <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#8abaa7a7a7009d93265410ad79cd300b" title="Initialize a new instance of the NetServiceBrowser class.">NetServiceBrowser</a>()
<a name="l00128"></a>00128         {
<a name="l00129"></a>00129             foundServices = <span class="keyword">new</span> List&lt;NetService&gt;();
<a name="l00130"></a>00130         }
<a name="l00131"></a>00131 
<a name="l00142"></a><a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#9fc6bacadbf6f2c11bdd587a2dda3f3b">00142</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#9fc6bacadbf6f2c11bdd587a2dda3f3b" title="Starts a search for services of a given type within a given domain.">SearchForService</a>(String type, String domain)
<a name="l00143"></a>00143         {
<a name="l00144"></a>00144             <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#b6cd1d68be8b337bd491bc86ed1945f7" title="Stops the currently running search or resolution.">Stop</a>();
<a name="l00145"></a>00145 
<a name="l00146"></a>00146             browseReplyCb = <span class="keyword">new</span> <a class="code" href="class_zeroconf_service_1_1m_d_n_s_imports.html">mDNSImports</a>.<a class="code" href="class_zeroconf_service_1_1m_d_n_s_imports.html#79058080d2f07df2b4c0ca687739c3f4">DNSServiceBrowseReply</a>(BrowseReply);
<a name="l00147"></a>00147             gchSelf = GCHandle.Alloc(<span class="keyword">this</span>);
<a name="l00148"></a>00148 
<a name="l00149"></a>00149             <a class="code" href="namespace_zeroconf_service.html#2c013dc14b4913ecd8f55d7ca33d8c08" title="The error type used by the underlying dnssd.dll. These errors can be wrapped in DNSServiceException...">DNSServiceErrorType</a> err;
<a name="l00150"></a>00150             err = <a class="code" href="class_zeroconf_service_1_1m_d_n_s_imports.html">mDNSImports</a>.DNSServiceBrowse(out <a class="code" href="class_zeroconf_service_1_1_d_n_s_service.html#dc76878be2ad2b6093de88c405270aea" title="Pointer to the internal DNSService object.">sdRef</a>, 0, 0, type, domain, browseReplyCb, (IntPtr)gchSelf);
<a name="l00151"></a>00151 
<a name="l00152"></a>00152             <span class="keywordflow">if</span> (err != <a class="code" href="namespace_zeroconf_service.html#2c013dc14b4913ecd8f55d7ca33d8c08" title="The error type used by the underlying dnssd.dll. These errors can be wrapped in DNSServiceException...">DNSServiceErrorType</a>.kDNSServiceErr_NoError)
<a name="l00153"></a>00153             {
<a name="l00154"></a>00154                 <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zeroconf_service_1_1_d_n_s_service_exception.html" title="An exception that is thrown when a NetService or NetServiceBrowser dll error occurs...">DNSServiceException</a>(<span class="stringliteral">"DNSServiceBrowse"</span>, err);
<a name="l00155"></a>00155             }
<a name="l00156"></a>00156 
<a name="l00157"></a>00157             <a class="code" href="class_zeroconf_service_1_1_d_n_s_service.html#e7095b0d346601b9868a8e357557df2c" title="Starts polling the DNSService socket, and delegates data back to the primary DNSService...">SetupWatchSocket</a>();
<a name="l00158"></a>00158         }
<a name="l00159"></a>00159 
<a name="l00160"></a>00160         <span class="keyword">private</span> <span class="keywordtype">void</span> SearchForDomains(<a class="code" href="namespace_zeroconf_service.html#f0be19a5022fd4fbaff948419d8ab40b">DNSServiceFlags</a> flags)
<a name="l00161"></a>00161         {
<a name="l00162"></a>00162             <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#b6cd1d68be8b337bd491bc86ed1945f7" title="Stops the currently running search or resolution.">Stop</a>();
<a name="l00163"></a>00163 
<a name="l00164"></a>00164             domainSearchReplyCb = <span class="keyword">new</span> <a class="code" href="class_zeroconf_service_1_1m_d_n_s_imports.html">mDNSImports</a>.<a class="code" href="class_zeroconf_service_1_1m_d_n_s_imports.html#f870a39042380a25a01ffca4d3e95f6b">DNSServiceDomainEnumReply</a>(DomainSearchReply);
<a name="l00165"></a>00165             gchSelf = GCHandle.Alloc(<span class="keyword">this</span>);
<a name="l00166"></a>00166 
<a name="l00167"></a>00167             <a class="code" href="namespace_zeroconf_service.html#2c013dc14b4913ecd8f55d7ca33d8c08" title="The error type used by the underlying dnssd.dll. These errors can be wrapped in DNSServiceException...">DNSServiceErrorType</a> err;
<a name="l00168"></a>00168             err = <a class="code" href="class_zeroconf_service_1_1m_d_n_s_imports.html">mDNSImports</a>.DNSServiceEnumerateDomains(out <a class="code" href="class_zeroconf_service_1_1_d_n_s_service.html#dc76878be2ad2b6093de88c405270aea" title="Pointer to the internal DNSService object.">sdRef</a>, flags, 0, domainSearchReplyCb, (IntPtr)gchSelf);
<a name="l00169"></a>00169 
<a name="l00170"></a>00170             <span class="keywordflow">if</span> (err != <a class="code" href="namespace_zeroconf_service.html#2c013dc14b4913ecd8f55d7ca33d8c08" title="The error type used by the underlying dnssd.dll. These errors can be wrapped in DNSServiceException...">DNSServiceErrorType</a>.kDNSServiceErr_NoError)
<a name="l00171"></a>00171             {
<a name="l00172"></a>00172                 <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_zeroconf_service_1_1_d_n_s_service_exception.html" title="An exception that is thrown when a NetService or NetServiceBrowser dll error occurs...">DNSServiceException</a>(<span class="stringliteral">"DNSServiceEnumerateDomains"</span>, err);
<a name="l00173"></a>00173             }
<a name="l00174"></a>00174 
<a name="l00175"></a>00175             <a class="code" href="class_zeroconf_service_1_1_d_n_s_service.html#e7095b0d346601b9868a8e357557df2c" title="Starts polling the DNSService socket, and delegates data back to the primary DNSService...">SetupWatchSocket</a>();
<a name="l00176"></a>00176         }
<a name="l00177"></a>00177 
<a name="l00181"></a><a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#63902c11f161842bf4cd4e1598652eda">00181</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#63902c11f161842bf4cd4e1598652eda" title="Starts a search for domains visible to the host.">SearchForBrowseableDomains</a>()
<a name="l00182"></a>00182         {
<a name="l00183"></a>00183             SearchForDomains(<a class="code" href="namespace_zeroconf_service.html#f0be19a5022fd4fbaff948419d8ab40b">DNSServiceFlags</a>.kDNSServiceFlagsBrowseDomains);
<a name="l00184"></a>00184         }
<a name="l00185"></a>00185 
<a name="l00193"></a><a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#36362eeca6baeebbc52edf40679e8a58">00193</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#36362eeca6baeebbc52edf40679e8a58" title="Starts a search for domains in which the host may register services.">SearchForRegistrationDomains</a>()
<a name="l00194"></a>00194         {
<a name="l00195"></a>00195             SearchForDomains(<a class="code" href="namespace_zeroconf_service.html#f0be19a5022fd4fbaff948419d8ab40b">DNSServiceFlags</a>.kDNSServiceFlagsRegistrationDomains);
<a name="l00196"></a>00196         }
<a name="l00197"></a>00197 
<a name="l00201"></a><a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#b6cd1d68be8b337bd491bc86ed1945f7">00201</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#b6cd1d68be8b337bd491bc86ed1945f7" title="Stops the currently running search or resolution.">Stop</a>()
<a name="l00202"></a>00202         {
<a name="l00203"></a>00203             <span class="comment">/* FIXME: do i need to stop the poll? ... */</span>
<a name="l00204"></a>00204             <span class="keywordflow">if</span> (sdRef != IntPtr.Zero)
<a name="l00205"></a>00205             {
<a name="l00206"></a>00206                 <a class="code" href="class_zeroconf_service_1_1m_d_n_s_imports.html">mDNSImports</a>.DNSServiceRefDeallocate(sdRef);
<a name="l00207"></a>00207                 sdRef = IntPtr.Zero;
<a name="l00208"></a>00208             }
<a name="l00209"></a>00209             <a class="code" href="class_zeroconf_service_1_1_d_n_s_service.html#9e1c7d0d137f14638780f1ec2749e6b9" title="Tries, and waits, for the socket to stop polling.">WaitStop</a>();
<a name="l00210"></a>00210             browseReplyCb = null; <span class="comment">/* garbage collected */</span>
<a name="l00211"></a>00211             domainSearchReplyCb = null;
<a name="l00212"></a>00212 
<a name="l00213"></a>00213             <span class="keywordflow">if</span> (gchSelf.IsAllocated)
<a name="l00214"></a>00214             {
<a name="l00215"></a>00215                 gchSelf.Free();
<a name="l00216"></a>00216             }
<a name="l00217"></a>00217         }
<a name="l00218"></a>00218 
<a name="l00219"></a>00219         <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> BrowseReply(IntPtr sdRef,
<a name="l00220"></a>00220             <a class="code" href="namespace_zeroconf_service.html#f0be19a5022fd4fbaff948419d8ab40b">DNSServiceFlags</a> flags,
<a name="l00221"></a>00221             UInt32 interfaceIndex,
<a name="l00222"></a>00222             <a class="code" href="namespace_zeroconf_service.html#2c013dc14b4913ecd8f55d7ca33d8c08" title="The error type used by the underlying dnssd.dll. These errors can be wrapped in DNSServiceException...">DNSServiceErrorType</a> errorCode,
<a name="l00223"></a>00223             String serviceName,
<a name="l00224"></a>00224             String regtype,
<a name="l00225"></a>00225             String replyDomain,
<a name="l00226"></a>00226             IntPtr context)
<a name="l00227"></a>00227         {
<a name="l00228"></a>00228             GCHandle gch = (GCHandle)context;
<a name="l00229"></a>00229             <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html" title="The NetServiceBrowser class enables the user of the class to find published services...">NetServiceBrowser</a> c = (<a class="code" href="class_zeroconf_service_1_1_net_service_browser.html" title="The NetServiceBrowser class enables the user of the class to find published services...">NetServiceBrowser</a>)gch.Target;
<a name="l00230"></a>00230 
<a name="l00231"></a>00231             <span class="keywordtype">bool</span> moreComing = ((flags &amp; <a class="code" href="namespace_zeroconf_service.html#f0be19a5022fd4fbaff948419d8ab40b">DNSServiceFlags</a>.kDNSServiceFlagsMoreComing) != 0);
<a name="l00232"></a>00232 
<a name="l00233"></a>00233             <span class="keywordflow">if</span> ((flags &amp; <a class="code" href="namespace_zeroconf_service.html#f0be19a5022fd4fbaff948419d8ab40b">DNSServiceFlags</a>.kDNSServiceFlagsAdd) != 0)
<a name="l00234"></a>00234             { <span class="comment">/* add */</span>
<a name="l00235"></a>00235                 <a class="code" href="class_zeroconf_service_1_1_net_service.html" title="The NetService class represents a network service that your application publishes...">NetService</a> newService = <span class="keyword">new</span> <a class="code" href="class_zeroconf_service_1_1_net_service.html" title="The NetService class represents a network service that your application publishes...">NetService</a>(replyDomain, regtype, serviceName);
<a name="l00236"></a>00236                 newService.InheritInvokeOptions(c);
<a name="l00237"></a>00237 
<a name="l00238"></a>00238                 c.<a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#d91e80aa618a80acc23adb7c83ce48c7">foundServices</a>.Add(newService);
<a name="l00239"></a>00239 
<a name="l00240"></a>00240                 <span class="keywordflow">if</span> (c.<a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#035ed4894fe03e42dda58abc91ea8371" title="Occurs when a NetService was found.">DidFindService</a> != null)
<a name="l00241"></a>00241                     c.<a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#035ed4894fe03e42dda58abc91ea8371" title="Occurs when a NetService was found.">DidFindService</a>(c, newService, moreComing);
<a name="l00242"></a>00242             }
<a name="l00243"></a>00243             <span class="keywordflow">else</span>
<a name="l00244"></a>00244             { <span class="comment">/* remove */</span>
<a name="l00245"></a>00245 
<a name="l00246"></a>00246                 <span class="keywordflow">foreach</span> (NetService service <span class="keywordflow">in</span> c.<a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#d91e80aa618a80acc23adb7c83ce48c7">foundServices</a>)
<a name="l00247"></a>00247                 {
<a name="l00248"></a>00248                     <span class="keywordflow">if</span> (service.Name == serviceName &amp;&amp;
<a name="l00249"></a>00249                         service.Type == regtype &amp;&amp;
<a name="l00250"></a>00250                         service.Domain == replyDomain)
<a name="l00251"></a>00251                     {
<a name="l00252"></a>00252                         c.<a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#d91e80aa618a80acc23adb7c83ce48c7">foundServices</a>.Remove(service);
<a name="l00253"></a>00253                         <span class="keywordflow">if</span> (c.<a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#de8c954d00e6c8fab2502d7a21c3664c" title="Occurs when a NetService is no longer available.">DidRemoveService</a> != null)
<a name="l00254"></a>00254                             c.<a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#de8c954d00e6c8fab2502d7a21c3664c" title="Occurs when a NetService is no longer available.">DidRemoveService</a>(c, service, moreComing);
<a name="l00255"></a>00255                         <span class="keywordflow">break</span>;
<a name="l00256"></a>00256                     }
<a name="l00257"></a>00257                 }
<a name="l00258"></a>00258 
<a name="l00259"></a>00259             }
<a name="l00260"></a>00260         }
<a name="l00261"></a>00261 
<a name="l00262"></a>00262         <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> DomainSearchReply(IntPtr sdRef,
<a name="l00263"></a>00263             <a class="code" href="namespace_zeroconf_service.html#f0be19a5022fd4fbaff948419d8ab40b">DNSServiceFlags</a> flags,
<a name="l00264"></a>00264             UInt32 interfaceIndex,
<a name="l00265"></a>00265             <a class="code" href="namespace_zeroconf_service.html#2c013dc14b4913ecd8f55d7ca33d8c08" title="The error type used by the underlying dnssd.dll. These errors can be wrapped in DNSServiceException...">DNSServiceErrorType</a> errorCode,
<a name="l00266"></a>00266             String replyDomain,
<a name="l00267"></a>00267             IntPtr context)
<a name="l00268"></a>00268         {
<a name="l00269"></a>00269             GCHandle gch = (GCHandle)context;
<a name="l00270"></a>00270             <a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#8abaa7a7a7009d93265410ad79cd300b" title="Initialize a new instance of the NetServiceBrowser class.">NetServiceBrowser</a> c = (<a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#8abaa7a7a7009d93265410ad79cd300b" title="Initialize a new instance of the NetServiceBrowser class.">NetServiceBrowser</a>)gch.Target;
<a name="l00271"></a>00271 
<a name="l00272"></a>00272             <span class="keywordtype">bool</span> moreComing = ((flags &amp; <a class="code" href="namespace_zeroconf_service.html#f0be19a5022fd4fbaff948419d8ab40b">DNSServiceFlags</a>.kDNSServiceFlagsMoreComing) != 0);
<a name="l00273"></a>00273 
<a name="l00274"></a>00274             <span class="keywordflow">if</span> ((flags &amp; <a class="code" href="namespace_zeroconf_service.html#f0be19a5022fd4fbaff948419d8ab40b">DNSServiceFlags</a>.kDNSServiceFlagsAdd) != 0)
<a name="l00275"></a>00275             { <span class="comment">/* add */</span>
<a name="l00276"></a>00276                 <span class="keywordflow">if</span> (c.DidFindDomain != null)
<a name="l00277"></a>00277                     c.<a class="code" href="class_zeroconf_service_1_1_net_service_browser.html#0d4148b44bee4eb640f974192911341b" title="Occurs when a domain has been found.">DidFindDomain</a>(c, replyDomain, moreComing);
<a name="l00278"></a>00278             }
<a name="l00279"></a>00279             <span class="keywordflow">else</span>
<a name="l00280"></a>00280             { <span class="comment">/* remove */</span>
<a name="l00281"></a>00281                 <span class="keywordflow">if</span> (c.DidRemoveDomain != null)
<a name="l00282"></a>00282                     c.DidRemoveDomain(c, replyDomain, moreComing);
<a name="l00283"></a>00283             }
<a name="l00284"></a>00284         }
<a name="l00285"></a>00285 
<a name="l00286"></a>00286     } <span class="comment">/* end class */</span>
<a name="l00287"></a>00287 }
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Wed Jul 18 04:01:22 2007 for Crossfade by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
